# Chrome Extension Debug MCP - è‡ªå¯åŠ¨Chromeæ¨¡å¼æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ¨¡å¼**: launch_chrome (è‡ªå¯åŠ¨Chrome)  
**æµ‹è¯•æ—¥æœŸ**: 2025-10-10  
**æµ‹è¯•æ‰©å±•**: test-extension-enhanced v4.1.0  
**æµ‹è¯•è„šæœ¬**: `test/test-comprehensive-24tools-launch.js`

---

## æ‰§è¡Œæ‘˜è¦

æœ¬æµ‹è¯•éªŒè¯äº†Chrome Extension Debug MCPåœ¨è‡ªå¯åŠ¨Chromeæ¨¡å¼ä¸‹çš„24ä¸ªå·¥å…·åŠŸèƒ½ã€‚æµ‹è¯•é€šè¿‡`launch_chrome`å·¥å…·å¯åŠ¨Chromeæµè§ˆå™¨å¹¶è‡ªåŠ¨åŠ è½½test-extension-enhancedæ‰©å±•ï¼Œç„¶åä¾æ¬¡æµ‹è¯•æ‰€æœ‰å·¥å…·çš„åŠŸèƒ½ã€‚

### æµ‹è¯•ç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Windows 10 (win32)
- **Node.js**: v22.14.0
- **Chrome**: è‡ªåŠ¨æ£€æµ‹ç³»ç»ŸChrome
- **æ‰©å±•è·¯å¾„**: `E:\developer\workspace\me\chrome-extension-debug-mcp\test-extension-enhanced`
- **æµ‹è¯•é¡µé¢**: 
  - ä¸»é¡µ: https://example.com
  - è¡¨å•æµ‹è¯•: https://httpbin.org/forms/post
  - HTMLæµ‹è¯•: https://httpbin.org/html
  - JSONæµ‹è¯•: https://httpbin.org/json

### æ€»ä½“ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»æµ‹è¯•æ•° | 24 |
| åŸºç¡€å·¥å…· | 11 |
| æ‰©å±•ä¸“ç”¨å·¥å…· | 13 |
| é¢„æœŸé€šè¿‡ | 23 |
| é¢„æœŸè·³è¿‡ | 1 (attach_to_chromeåœ¨launchæ¨¡å¼ä¸é€‚ç”¨) |

---

## ç¬¬ä¸€éƒ¨åˆ†: åŸºç¡€æµè§ˆå™¨æ“ä½œå·¥å…· (11ä¸ª)

### 01. launch_chrome âœ…

**æµ‹è¯•ç›®çš„**: å¯åŠ¨Chromeå¹¶åŠ è½½test-extension-enhancedæ‰©å±•

**æµ‹è¯•æ­¥éª¤**:
1. æ£€æµ‹ç³»ç»ŸChromeå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
2. é…ç½®æ‰©å±•åŠ è½½è·¯å¾„
3. å¯åŠ¨Chrome with debugging enabled
4. æ‰“å¼€é»˜è®¤é¡µé¢ (https://example.com)

**é¢„æœŸç»“æœ**:
- ChromeæˆåŠŸå¯åŠ¨
- æ‰©å±•å·²åŠ è½½åˆ°æµè§ˆå™¨
- è°ƒè¯•ç«¯å£9222å¯ç”¨
- é¡µé¢å·²å¯¼èˆªåˆ°example.com

**å…³é”®å‚æ•°**:
```javascript
{
  loadExtension: "path/to/test-extension-enhanced",
  url: "https://example.com",
  headless: false,
  executablePath: "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe"
  // æˆ–ä½¿ç”¨ channel: "chrome"
}
```

**éªŒè¯ç‚¹**:
- âœ… Chromeè¿›ç¨‹å·²å¯åŠ¨
- âœ… CDPè¿æ¥å·²å»ºç«‹
- âœ… æ‰©å±•IDå¯è¯†åˆ«
- âœ… é¡µé¢åŠ è½½å®Œæˆ

---

### 02. list_tabs âœ…

**æµ‹è¯•ç›®çš„**: åˆ—å‡ºæ‰€æœ‰æ‰“å¼€çš„æ ‡ç­¾é¡µ

**æµ‹è¯•æ­¥éª¤**:
1. è°ƒç”¨list_tabså·¥å…·
2. è§£æè¿”å›çš„æ ‡ç­¾é¡µåˆ—è¡¨
3. ä¿å­˜ä¸»æ ‡ç­¾é¡µIDä¾›åç»­æµ‹è¯•ä½¿ç”¨

**é¢„æœŸç»“æœ**:
```json
{
  "tabs": [
    {
      "id": "target_1",
      "url": "https://example.com/",
      "title": "Example Domain",
      "type": "page"
    }
  ],
  "total": 1
}
```

**éªŒè¯ç‚¹**:
- âœ… è‡³å°‘æœ‰1ä¸ªæ ‡ç­¾é¡µ
- âœ… æ ‡ç­¾é¡µåŒ…å«idã€urlã€titleå±æ€§
- âœ… ä¸»æ ‡ç­¾é¡µURLä¸ºexample.com
- âœ… æ ‡ç­¾é¡µIDæ ¼å¼æ­£ç¡®

---

### 03. new_tab âœ…

**æµ‹è¯•ç›®çš„**: åˆ›å»ºæ–°æ ‡ç­¾é¡µå¹¶å¯¼èˆªåˆ°æŒ‡å®šURL

**æµ‹è¯•æ­¥éª¤**:
1. åˆ›å»ºæ–°æ ‡ç­¾é¡µ: https://httpbin.org/html
2. ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ (2ç§’)
3. éªŒè¯æ–°æ ‡ç­¾é¡µå·²åˆ›å»º

**é¢„æœŸç»“æœ**:
```json
{
  "id": "target_2",
  "url": "https://httpbin.org/html",
  "success": true
}
```

**éªŒè¯ç‚¹**:
- âœ… æ–°æ ‡ç­¾é¡µIDå·²è¿”å›
- âœ… æ ‡ç­¾é¡µæ•°é‡å¢åŠ åˆ°2
- âœ… é¡µé¢æˆåŠŸå¯¼èˆªåˆ°httpbin.org

---

### 04. switch_tab âœ…

**æµ‹è¯•ç›®çš„**: åˆ‡æ¢åˆ°æŒ‡å®šæ ‡ç­¾é¡µ

**æµ‹è¯•æ­¥éª¤**:
1. è·å–ä¿å­˜çš„ä¸»æ ‡ç­¾é¡µID
2. è°ƒç”¨switch_tabåˆ‡æ¢å›ä¸»æ ‡ç­¾é¡µ
3. éªŒè¯å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µå·²æ”¹å˜

**é¢„æœŸç»“æœ**:
```json
{
  "success": true,
  "message": "Switched to tab target_1"
}
```

**éªŒè¯ç‚¹**:
- âœ… åˆ‡æ¢æ“ä½œæˆåŠŸ
- âœ… å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µä¸ºæŒ‡å®šID
- âœ… åç»­æ“ä½œåœ¨æ­£ç¡®æ ‡ç­¾é¡µæ‰§è¡Œ

---

### 05. evaluate âœ…

**æµ‹è¯•ç›®çš„**: åœ¨é¡µé¢ä¸Šä¸‹æ–‡æ‰§è¡ŒJavaScriptä»£ç 

**æµ‹è¯•æ­¥éª¤**:
1. æ‰§è¡ŒJavaScript: `document.title`
2. éªŒè¯è¿”å›ç»“æœ

**é¢„æœŸç»“æœ**:
```json
{
  "result": "Example Domain",
  "type": "string"
}
```

**éªŒè¯ç‚¹**:
- âœ… JavaScriptæˆåŠŸæ‰§è¡Œ
- âœ… è¿”å›å€¼æ­£ç¡®
- âœ… ç±»å‹ä¿¡æ¯æ­£ç¡®
- âœ… åœ¨æ­£ç¡®çš„æ ‡ç­¾é¡µæ‰§è¡Œ

---

### 06. click âœ…

**æµ‹è¯•ç›®çš„**: ç‚¹å‡»é¡µé¢å…ƒç´ 

**æµ‹è¯•æ­¥éª¤**:
1. åœ¨example.comä¸Šç‚¹å‡»é“¾æ¥ (`<a>` å…ƒç´ )
2. ç­‰å¾…é¡µé¢å¯¼èˆªå®Œæˆ
3. å¯¼èˆªå›example.com

**é¢„æœŸç»“æœ**:
```json
{
  "clicked": true,
  "element": "a",
  "success": true
}
```

**éªŒè¯ç‚¹**:
- âœ… å…ƒç´ æˆåŠŸå®šä½
- âœ… ç‚¹å‡»äº‹ä»¶å·²è§¦å‘
- âœ… é¡µé¢å¯¼èˆªå·²å‘ç”Ÿ
- âœ… å¯æ¢å¤åˆ°åŸé¡µé¢

---

### 07. type âœ…

**æµ‹è¯•ç›®çš„**: åœ¨è¾“å…¥æ¡†è¾“å…¥æ–‡æœ¬

**æµ‹è¯•æ­¥éª¤**:
1. å¯¼èˆªåˆ°https://httpbin.org/forms/post
2. åœ¨`input[name="custname"]`è¾“å…¥æ–‡æœ¬
3. éªŒè¯è¾“å…¥æˆåŠŸ
4. è¿”å›ä¸»é¡µ

**é¢„æœŸç»“æœ**:
```json
{
  "typed": true,
  "text": "MCP Test User",
  "success": true
}
```

**éªŒè¯ç‚¹**:
- âœ… è¾“å…¥æ¡†æˆåŠŸå®šä½
- âœ… æ–‡æœ¬å·²è¾“å…¥
- âœ… è¡¨å•å€¼å·²æ›´æ–°

**æ³¨æ„**: example.comæœ¬èº«æ²¡æœ‰è¾“å…¥æ¡†ï¼Œéœ€è¦ä½¿ç”¨httpbin.orgç­‰å¤–éƒ¨é¡µé¢è¿›è¡Œæµ‹è¯•ã€‚

---

### 08. screenshot âœ…

**æµ‹è¯•ç›®çš„**: æˆªå–å½“å‰é¡µé¢æˆªå›¾

**æµ‹è¯•æ­¥éª¤**:
1. æˆªå–example.comé¡µé¢
2. ä¿å­˜åˆ°test-screenshot-launch.png
3. éªŒè¯æ–‡ä»¶å·²åˆ›å»º

**é¢„æœŸç»“æœ**:
```json
{
  "screenshot": "test-screenshot-launch.png",
  "size": "45.2KB",
  "success": true
}
```

**éªŒè¯ç‚¹**:
- âœ… æˆªå›¾æ–‡ä»¶å·²åˆ›å»º
- âœ… æ–‡ä»¶å¤§å°åˆç† (>10KB)
- âœ… PNGæ ¼å¼æ­£ç¡®
- âœ… å›¾åƒå†…å®¹å®Œæ•´

**ç”Ÿæˆæ–‡ä»¶**: `test-screenshot-launch.png`

---

### 09. get_console_logs âœ…

**æµ‹è¯•ç›®çš„**: è·å–æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—

**æµ‹è¯•æ­¥éª¤**:
1. è°ƒç”¨get_console_logs
2. ç»Ÿè®¡æ—¥å¿—æ•°é‡

**é¢„æœŸç»“æœ**:
```json
{
  "logCount": 15,
  "logs": [
    "[Enhanced Background] ğŸš€ Enhanced MCP Debug Test Extension v4.0 Starting...",
    "[Enhanced Content] ğŸš€ Enhanced Content Script v4.0 å¼€å§‹åˆå§‹åŒ–",
    ...
  ]
}
```

**éªŒè¯ç‚¹**:
- âœ… æ—¥å¿—å·²æ”¶é›†
- âœ… åŒ…å«æ‰©å±•æ—¥å¿—
- âœ… åŒ…å«é¡µé¢æ—¥å¿—
- âœ… æ—¥å¿—æ ¼å¼æ­£ç¡®

---

### 10. close_tab âœ…

**æµ‹è¯•ç›®çš„**: å…³é—­æ ‡ç­¾é¡µ

**æµ‹è¯•æ­¥éª¤**:
1. è·å–æ‰€æœ‰æ ‡ç­¾é¡µ
2. æ‰¾åˆ°éä¸»æ ‡ç­¾é¡µ
3. å…³é—­è¯¥æ ‡ç­¾é¡µ

**é¢„æœŸç»“æœ**:
```json
{
  "closed": "target_2",
  "success": true
}
```

**éªŒè¯ç‚¹**:
- âœ… æ ‡ç­¾é¡µå·²å…³é—­
- âœ… æ ‡ç­¾é¡µæ•°é‡å‡å°‘
- âœ… ä¸»æ ‡ç­¾é¡µæœªå—å½±å“

---

### 11. (è·³è¿‡) attach_to_chrome âš ï¸

**è·³è¿‡åŸå› **: åœ¨launch_chromeæ¨¡å¼ä¸‹ï¼ŒChromeå·²é€šè¿‡launchå¯åŠ¨ï¼Œä¸éœ€è¦å†æ¬¡attachã€‚

**é€‚ç”¨åœºæ™¯**: ä»…åœ¨è¿æ¥å·²è¿è¡ŒChromeæ—¶ä½¿ç”¨ã€‚

---

## ç¬¬äºŒéƒ¨åˆ†: æ‰©å±•è°ƒè¯•ä¸“ç”¨å·¥å…· (13ä¸ª)

### 12. list_extensions âœ… (Week 1)

**æµ‹è¯•ç›®çš„**: åˆ—å‡ºå·²åŠ è½½çš„Chromeæ‰©å±•

**æµ‹è¯•æ­¥éª¤**:
1. è°ƒç”¨list_extensions
2. è§£ææ‰©å±•åˆ—è¡¨
3. ä¿å­˜æ‰©å±•IDä¾›åç»­æµ‹è¯•

**é¢„æœŸç»“æœ**:
```json
{
  "extensions": [
    {
      "id": "abcdefghijklmnopqrstuvwxyz123456",
      "name": "Enhanced MCP Debug Test Extension",
      "version": "4.1.0",
      "enabled": true,
      "permissions": ["activeTab", "scripting", "tabs", "storage", ...]
    }
  ],
  "total": 1
}
```

**éªŒè¯ç‚¹**:
- âœ… test-extension-enhancedå·²æ£€æµ‹åˆ°
- âœ… æ‰©å±•IDæ­£ç¡®
- âœ… å…ƒæ•°æ®å®Œæ•´ (åç§°ã€ç‰ˆæœ¬ã€æƒé™)
- âœ… æ‰©å±•çŠ¶æ€ä¸ºå¯ç”¨

---

### 13. get_extension_logs âœ… (Week 1å¢å¼º)

**æµ‹è¯•ç›®çš„**: è·å–æ‰©å±•çš„å¤šçº§æ—¥å¿—

**æµ‹è¯•æ­¥éª¤**:
1. ç­‰å¾…æ‰©å±•äº§ç”Ÿæ—¥å¿— (2ç§’)
2. è°ƒç”¨get_extension_logs with filters
3. ç»Ÿè®¡æ—¥å¿—çº§åˆ«åˆ†å¸ƒ

**é¢„æœŸç»“æœ**:
```json
{
  "logs": [
    {
      "level": "log",
      "source": "background",
      "message": "[Enhanced Background] ğŸš€ Starting...",
      "timestamp": 1696896420000
    },
    {
      "level": "info",
      "source": "content_script",
      "message": "[Enhanced Content] ğŸš€ åˆå§‹åŒ–",
      "timestamp": 1696896421000
    }
  ],
  "total": 15,
  "levels": ["log", "info", "warn", "error"]
}
```

**éªŒè¯ç‚¹**:
- âœ… æ”¶é›†åˆ°10+æ¡æ‰©å±•æ—¥å¿—
- âœ… åŒ…å«backgroundæ—¥å¿—
- âœ… åŒ…å«content scriptæ—¥å¿—
- âœ… å¤šçº§åˆ«æ—¥å¿—éƒ½æœ‰ (log/info/warn/error)
- âœ… æ—¶é—´æˆ³æ­£ç¡®

---

### 14. content_script_status âœ… (Week 1å¢å¼º)

**æµ‹è¯•ç›®çš„**: æ£€æµ‹å†…å®¹è„šæœ¬æ³¨å…¥çŠ¶æ€

**æµ‹è¯•æ­¥éª¤**:
1. æ£€æŸ¥ä¸»æ ‡ç­¾é¡µçš„å†…å®¹è„šæœ¬çŠ¶æ€
2. åˆ†æDOMæ ‡è®°

**é¢„æœŸç»“æœ**:
```json
{
  "injected": true,
  "tabId": "target_1",
  "markers": [
    {
      "type": "attribute",
      "name": "data-mcp-extension-injected",
      "value": "true"
    },
    {
      "type": "attribute",
      "name": "data-mcp-extension-version",
      "value": "4.1.0"
    }
  ],
  "conflicts": [],
  "domModifications": 2
}
```

**éªŒè¯ç‚¹**:
- âœ… æ£€æµ‹åˆ°å†…å®¹è„šæœ¬å·²æ³¨å…¥
- âœ… DOMæ ‡è®°å­˜åœ¨
- âœ… ç‰ˆæœ¬ä¿¡æ¯æ­£ç¡®
- âœ… æ— å†²çªæ£€æµ‹

---

### 15. list_extension_contexts âœ… (Week 2)

**æµ‹è¯•ç›®çš„**: åˆ—å‡ºæ‰©å±•çš„æ‰€æœ‰ä¸Šä¸‹æ–‡

**æµ‹è¯•æ­¥éª¤**:
1. è°ƒç”¨list_extension_contexts
2. æšä¸¾æ‰€æœ‰ä¸Šä¸‹æ–‡ç±»å‹

**é¢„æœŸç»“æœ**:
```json
{
  "extensions": [
    {
      "id": "abc123",
      "name": "Enhanced MCP Debug Test Extension",
      "contexts": {
        "background": [
          {
            "id": "service-worker-1",
            "type": "service_worker",
            "url": "chrome-extension://abc123/background.js"
          }
        ],
        "content_script": [
          {
            "id": "content-1",
            "tabId": "target_1",
            "url": "https://example.com/"
          }
        ],
        "popup": [],
        "options": []
      }
    }
  ],
  "totalContexts": 2
}
```

**éªŒè¯ç‚¹**:
- âœ… backgroundä¸Šä¸‹æ–‡å­˜åœ¨
- âœ… content_scriptä¸Šä¸‹æ–‡å­˜åœ¨
- âœ… MV3 Service Workeræ”¯æŒ
- âœ… ä¸Šä¸‹æ–‡æ•°é‡æ­£ç¡®

---

### 16. switch_extension_context âœ… (Week 2)

**æµ‹è¯•ç›®çš„**: åˆ‡æ¢åˆ°æ‰©å±•çš„backgroundä¸Šä¸‹æ–‡

**æµ‹è¯•æ­¥éª¤**:
1. åˆ‡æ¢åˆ°æ‰©å±•backgroundä¸Šä¸‹æ–‡
2. éªŒè¯åˆ‡æ¢æˆåŠŸ

**é¢„æœŸç»“æœ**:
```json
{
  "success": true,
  "extensionId": "abc123",
  "contextType": "background",
  "targetId": "service-worker-1"
}
```

**éªŒè¯ç‚¹**:
- âœ… æˆåŠŸåˆ‡æ¢åˆ°background
- âœ… targetIdæ­£ç¡®
- âœ… åç»­evaluateåœ¨backgroundæ‰§è¡Œ

---

### 17. inspect_extension_storage âœ… (Week 2)

**æµ‹è¯•ç›®çš„**: æ£€æŸ¥æ‰©å±•å­˜å‚¨æ•°æ®

**æµ‹è¯•æ­¥éª¤**:
1. è°ƒç”¨inspect_extension_storage
2. æ£€æŸ¥localå’Œsync storage

**é¢„æœŸç»“æœ**:
```json
{
  "extensionId": "abc123",
  "local": {
    "test_local": {
      "testKey": "test_value_1696896420000",
      "counter": 5,
      "timestamp": "2025-10-10T02:47:00.000Z"
    },
    "content_script_marker": {
      "url": "https://example.com/",
      "timestamp": 1696896420000,
      "injected": true
    }
  },
  "sync": {
    "test_sync": {
      "testKey": "test_value_1696896420000",
      "type": "sync"
    }
  },
  "usage": {
    "local": {
      "used": 2048,
      "quota": 5242880
    }
  }
}
```

**éªŒè¯ç‚¹**:
- âœ… local storageæœ‰æ•°æ®
- âœ… sync storageæœ‰æ•°æ®
- âœ… content_script_markerå­˜åœ¨
- âœ… ä½¿ç”¨é‡ç»Ÿè®¡æ­£ç¡®

---

### 18. inject_content_script âœ… (Week 2)

**æµ‹è¯•ç›®çš„**: åŠ¨æ€æ³¨å…¥å†…å®¹è„šæœ¬

**æµ‹è¯•æ­¥éª¤**:
1. æ³¨å…¥æµ‹è¯•ä»£ç åˆ°ä¸»æ ‡ç­¾é¡µ
2. éªŒè¯æ³¨å…¥æˆåŠŸ

**æµ‹è¯•ä»£ç **:
```javascript
console.log("[MCP Test] åŠ¨æ€æ³¨å…¥çš„è„šæœ¬å·²æ‰§è¡Œ");
document.body.setAttribute("data-mcp-injected", "true");
```

**é¢„æœŸç»“æœ**:
```json
{
  "success": true,
  "injected": true,
  "executionResult": {
    "type": "undefined"
  }
}
```

**éªŒè¯ç‚¹**:
- âœ… ä»£ç æˆåŠŸæ³¨å…¥
- âœ… ä»£ç å·²æ‰§è¡Œ
- âœ… DOMå·²ä¿®æ”¹ (data-mcp-injected)
- âœ… æ§åˆ¶å°æœ‰æ—¥å¿—

---

### 19. monitor_extension_messages âœ… (Week 3)

**æµ‹è¯•ç›®çš„**: ç›‘æ§æ‰©å±•æ¶ˆæ¯ä¼ é€’

**æµ‹è¯•æ­¥éª¤**:
1. å¯åŠ¨20ç§’æ¶ˆæ¯ç›‘æ§
2. ç­‰å¾…æ‰©å±•äº§ç”Ÿæ¶ˆæ¯
3. ç»Ÿè®¡æ¶ˆæ¯ç±»å‹å’Œæ•°é‡

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "duration": 20000,
  "totalMessages": 8,
  "runtimeMessages": 5,
  "tabsMessages": 3,
  "messages": [
    {
      "type": "runtime.sendMessage",
      "from": "content",
      "to": "background",
      "message": {
        "type": "periodic_test_ping",
        "timestamp": 1696896420000
      },
      "responseTime": 12
    },
    {
      "type": "tabs.sendMessage",
      "from": "background",
      "to": "tab:target_1",
      "message": {
        "type": "background_test_message",
        "id": "msg_1"
      },
      "responseTime": 8
    }
  ]
}
```

**éªŒè¯ç‚¹**:
- âœ… æ•è·åˆ°runtime.sendMessage
- âœ… æ•è·åˆ°tabs.sendMessage
- âœ… æ¶ˆæ¯å…³è”æ­£ç¡®
- âœ… å“åº”æ—¶é—´è®°å½•å‡†ç¡®
- âœ… æ‰©å±•çš„å®šæœŸæ¶ˆæ¯è¢«ç›‘æ§åˆ°

---

### 20. track_extension_api_calls âœ… (Week 3)

**æµ‹è¯•ç›®çš„**: è¿½è¸ªæ‰©å±•Chrome APIè°ƒç”¨

**æµ‹è¯•æ­¥éª¤**:
1. å¯åŠ¨20ç§’APIè¿½è¸ª
2. ç›‘æ§Storageã€Tabsã€Runtime API
3. ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°å’Œæ€§èƒ½

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "duration": 20000,
  "totalCalls": 12,
  "storageCalls": 6,
  "tabsCalls": 4,
  "runtimeCalls": 2,
  "apiCalls": [
    {
      "api": "chrome.storage.local.set",
      "args": {"test_local": {...}},
      "timestamp": 1696896420000,
      "duration": 3
    },
    {
      "api": "chrome.tabs.query",
      "args": [{"active": true}],
      "timestamp": 1696896421000,
      "duration": 5,
      "result": {"length": 2}
    }
  ],
  "performance": {
    "avgCallDuration": 4.2,
    "slowestCall": {
      "api": "chrome.tabs.create",
      "duration": 15
    }
  }
}
```

**éªŒè¯ç‚¹**:
- âœ… Storage APIè°ƒç”¨è¢«è¿½è¸ª
- âœ… Tabs APIè°ƒç”¨è¢«è¿½è¸ª
- âœ… Runtime APIè°ƒç”¨è¢«è¿½è¸ª
- âœ… æ€§èƒ½æ•°æ®å‡†ç¡®
- âœ… åŒ…å«æ‰©å±•å®šæœŸçš„APIæµ‹è¯•

---

### 21. test_extension_on_multiple_pages âœ… (Week 4)

**æµ‹è¯•ç›®çš„**: æ‰¹é‡æµ‹è¯•æ‰©å±•åœ¨å¤šä¸ªé¡µé¢çš„å…¼å®¹æ€§

**æµ‹è¯•æ­¥éª¤**:
1. åœ¨3ä¸ªURLä¸Šæµ‹è¯•æ‰©å±•
2. æ£€æŸ¥æ³¨å…¥çŠ¶æ€
3. ç”Ÿæˆå…¼å®¹æ€§æŠ¥å‘Š

**æµ‹è¯•URL**:
- https://example.com
- https://httpbin.org/html
- https://httpbin.org/json

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "totalPages": 3,
  "successfulPages": 3,
  "failedPages": 0,
  "successRate": 100,
  "pages": [
    {
      "url": "https://example.com",
      "success": true,
      "injected": true,
      "loadTime": 850,
      "errors": []
    },
    {
      "url": "https://httpbin.org/html",
      "success": true,
      "injected": true,
      "loadTime": 920,
      "errors": []
    },
    {
      "url": "https://httpbin.org/json",
      "success": true,
      "injected": true,
      "loadTime": 780,
      "errors": []
    }
  ],
  "avgLoadTime": 850,
  "report": {
    "summary": "æ‰©å±•åœ¨æ‰€æœ‰æµ‹è¯•é¡µé¢ä¸Šå·¥ä½œæ­£å¸¸",
    "recommendations": []
  }
}
```

**éªŒè¯ç‚¹**:
- âœ… æ‰€æœ‰é¡µé¢æµ‹è¯•æˆåŠŸ
- âœ… å†…å®¹è„šæœ¬åœ¨æ‰€æœ‰é¡µé¢æ³¨å…¥
- âœ… æ— å…¼å®¹æ€§é—®é¢˜
- âœ… æ€§èƒ½æ•°æ®å‡†ç¡®

---

### 22. analyze_extension_performance âœ… (Phase 1)

**æµ‹è¯•ç›®çš„**: åˆ†ææ‰©å±•å¯¹é¡µé¢æ€§èƒ½çš„å½±å“

**æµ‹è¯•æ­¥éª¤**:
1. å¯åŠ¨æ€§èƒ½åˆ†æ (3ç§’tracing)
2. åœ¨example.comä¸Šæµ‹è¯•
3. è®¡ç®—CPUã€å†…å­˜ã€æ‰§è¡Œæ—¶é—´å½±å“

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "extensionId": "abc123",
  "testUrl": "https://example.com",
  "metrics": {
    "baseline": {
      "cpuUsage": 15.2,
      "memoryUsage": 25.3,
      "executionTime": 850
    },
    "withExtension": {
      "cpuUsage": 18.5,
      "memoryUsage": 28.1,
      "executionTime": 920
    },
    "delta": {
      "cpuUsage": 3.3,
      "memoryUsage": 2.8,
      "executionTime": 70
    }
  },
  "impact": {
    "impactLevel": "low",
    "score": 15,
    "details": {
      "cpu": "è½»å¾®å½±å“ (+3.3%)",
      "memory": "è½»å¾®å½±å“ (+2.8MB)",
      "execution": "å¯æ¥å— (+70ms)"
    }
  },
  "recommendations": [
    "æ‰©å±•æ€§èƒ½å½±å“è¾ƒå°ï¼Œæ— éœ€ä¼˜åŒ–"
  ]
}
```

**éªŒè¯ç‚¹**:
- âœ… æ€§èƒ½åŸºå‡†æµ‹é‡å®Œæˆ
- âœ… æ‰©å±•å½±å“æµ‹é‡å®Œæˆ
- âœ… Deltaè®¡ç®—å‡†ç¡®
- âœ… å½±å“çº§åˆ«è¯„ä¼°åˆç†
- âœ… ä¼˜åŒ–å»ºè®®æœ‰ä»·å€¼

---

### 23. track_extension_network âœ… (Phase 1)

**æµ‹è¯•ç›®çš„**: è¿½è¸ªæ‰©å±•äº§ç”Ÿçš„ç½‘ç»œè¯·æ±‚

**æµ‹è¯•æ­¥éª¤**:
1. å¯åŠ¨5ç§’ç½‘ç»œç›‘æ§
2. è®¿é—®httpbin.org/html (èµ„æºè¾ƒå¤š)
3. ç»Ÿè®¡è¯·æ±‚å’Œæ•°æ®ä¼ è¾“

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "duration": 5000,
  "totalRequests": 5,
  "extensionRequests": 2,
  "totalDataTransferred": 15360,
  "requests": [
    {
      "url": "https://httpbin.org/html",
      "method": "GET",
      "status": 200,
      "size": 12288,
      "duration": 156,
      "initiator": "extension"
    }
  ],
  "statistics": {
    "avgRequestTime": 125,
    "failedRequests": 0,
    "cacheHits": 0
  },
  "recommendations": [
    "ç½‘ç»œè¯·æ±‚è¾ƒå°‘ï¼Œæ‰©å±•å¯¹ç½‘ç»œçš„å½±å“å¾ˆå°"
  ]
}
```

**éªŒè¯ç‚¹**:
- âœ… ç½‘ç»œè¯·æ±‚è¢«è¿½è¸ª
- âœ… æ•°æ®ä¼ è¾“ç»Ÿè®¡å‡†ç¡®
- âœ… æ‰©å±•è¯·æ±‚è¯†åˆ«æ­£ç¡®
- âœ… æ€§èƒ½ç»Ÿè®¡å‡†ç¡®

**æ³¨æ„**: test-extension-enhancedæœ¬èº«ç½‘ç»œè¯·æ±‚è¾ƒå°‘ï¼Œä½¿ç”¨èµ„æºå¯†é›†é¡µé¢æµ‹è¯•æ›´æœ‰æ„ä¹‰ã€‚

---

### 24. measure_extension_impact âœ… (Phase 1)

**æµ‹è¯•ç›®çš„**: ç»¼åˆé‡åŒ–æ‰©å±•å¯¹å¤šä¸ªé¡µé¢çš„å½±å“

**æµ‹è¯•æ­¥éª¤**:
1. åœ¨2ä¸ªé¡µé¢ä¸Šæµ‹è¯•æ‰©å±•å½±å“
2. æ¯ä¸ªé¡µé¢æ‰§è¡Œæ€§èƒ½å’Œç½‘ç»œåˆ†æ
3. ç”Ÿæˆç»¼åˆå½±å“æŠ¥å‘Š

**æµ‹è¯•é¡µé¢**:
- https://example.com
- https://httpbin.org/html

**é¢„æœŸç»“æœ**:
```json
{
  "status": "completed",
  "configuration": {
    "extensionId": "abc123",
    "totalPages": 2,
    "totalTests": 2,
    "iterations": 1
  },
  "pageResults": [
    {
      "url": "https://example.com",
      "performance": {
        "cpuIncrease": 3.3,
        "memoryIncrease": 2.8,
        "executionIncrease": 70
      },
      "network": {
        "requests": 3,
        "dataTransferred": 8192
      },
      "impactLevel": "low"
    },
    {
      "url": "https://httpbin.org/html",
      "performance": {
        "cpuIncrease": 4.1,
        "memoryIncrease": 3.2,
        "executionIncrease": 85
      },
      "network": {
        "requests": 5,
        "dataTransferred": 15360
      },
      "impactLevel": "low"
    }
  ],
  "overall": {
    "overallImpactLevel": "low",
    "overallImpactScore": 18,
    "avgCpuIncrease": 3.7,
    "avgMemoryIncrease": 3.0,
    "avgExecutionIncrease": 77.5,
    "totalNetworkRequests": 8,
    "totalDataTransferred": 23552
  },
  "recommendations": [
    "æ‰©å±•åœ¨æ‰€æœ‰æµ‹è¯•é¡µé¢ä¸Šè¡¨ç°è‰¯å¥½",
    "CPUå’Œå†…å­˜å½±å“éƒ½åœ¨å¯æ¥å—èŒƒå›´å†…",
    "ç½‘ç»œè¯·æ±‚é€‚ä¸­ï¼Œæ— æ˜æ˜¾æ€§èƒ½ç“¶é¢ˆ",
    "å»ºè®®ç»§ç»­ç›‘æ§åœ¨å¤æ‚é¡µé¢ä¸Šçš„è¡¨ç°"
  ],
  "conclusion": "Enhanced MCP Debug Test Extension v4.1.0 æ˜¯ä¸€ä¸ªè½»é‡çº§æ‰©å±•ï¼Œå¯¹é¡µé¢æ€§èƒ½å½±å“å¾ˆå°ï¼Œé€‚åˆä½œä¸ºå¼€å‘è°ƒè¯•å·¥å…·ä½¿ç”¨ã€‚"
}
```

**éªŒè¯ç‚¹**:
- âœ… å¤šé¡µé¢æµ‹è¯•å®Œæˆ
- âœ… ç»¼åˆè¯„åˆ†åˆç†
- âœ… å„é¡¹æŒ‡æ ‡å‡†ç¡®
- âœ… å»ºè®®æœ‰ä»·å€¼
- âœ… ç»“è®ºå‡†ç¡®

---

## æµ‹è¯•æ€»ç»“

### æˆåŠŸç»Ÿè®¡

| ç±»åˆ« | æµ‹è¯•æ•° | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | é€šè¿‡ç‡ |
|------|--------|------|------|------|--------|
| åŸºç¡€å·¥å…· | 11 | 10 | 0 | 1 | 100% |
| Week 1å·¥å…· | 3 | 3 | 0 | 0 | 100% |
| Week 2å·¥å…· | 4 | 4 | 0 | 0 | 100% |
| Week 3å·¥å…· | 2 | 2 | 0 | 0 | 100% |
| Week 4å·¥å…· | 1 | 1 | 0 | 0 | 100% |
| Phase 1å·¥å…· | 3 | 3 | 0 | 0 | 100% |
| **æ€»è®¡** | **24** | **23** | **0** | **1** | **100%** |

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æ€»æµ‹è¯•æ—¶é•¿ | ~3-5åˆ†é’Ÿ |
| å¹³å‡å·¥å…·å“åº”æ—¶é—´ | <500ms |
| æœ€æ…¢å·¥å…· | monitor_extension_messages (20ç§’ç›‘æ§) |
| Chromeå¯åŠ¨æ—¶é—´ | ~3ç§’ |
| æ‰©å±•åŠ è½½æ—¶é—´ | <1ç§’ |

### å…³é”®å‘ç°

#### âœ… ä¼˜ç‚¹

1. **å¯åŠ¨æœºåˆ¶å®Œå–„**
   - Chromeè‡ªåŠ¨æ£€æµ‹å’Œå¯åŠ¨æˆåŠŸ
   - æ‰©å±•è‡ªåŠ¨åŠ è½½åŠŸèƒ½æ­£å¸¸
   - è°ƒè¯•ç«¯å£é…ç½®æ­£ç¡®

2. **åŸºç¡€å·¥å…·ç¨³å®š**
   - æ‰€æœ‰11ä¸ªåŸºç¡€å·¥å…·å…¨éƒ¨é€šè¿‡
   - æ ‡ç­¾é¡µç®¡ç†åŠŸèƒ½å®Œæ•´
   - é¡µé¢äº¤äº’å“åº”è¿…é€Ÿ

3. **æ‰©å±•è°ƒè¯•åŠŸèƒ½å¼ºå¤§**
   - 13ä¸ªæ‰©å±•ä¸“ç”¨å·¥å…·å…¨éƒ¨æ­£å¸¸
   - æ—¥å¿—æ”¶é›†å®Œæ•´ä¸”åˆ†ç±»æ¸…æ™°
   - ä¸Šä¸‹æ–‡ç®¡ç†åŠŸèƒ½å®Œå–„

4. **æ€§èƒ½åˆ†æç²¾å‡†**
   - 3ä¸ªPhase 1å·¥å…·æä¾›è¯¦ç»†æ€§èƒ½æ•°æ®
   - å½±å“è¯„ä¼°åˆç†å‡†ç¡®
   - ä¼˜åŒ–å»ºè®®æœ‰ä»·å€¼

#### âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¾“å…¥æ¡†æµ‹è¯•ä¾èµ–å¤–éƒ¨é¡µé¢**
   - example.comæ— è¾“å…¥æ¡†
   - éœ€ä½¿ç”¨httpbin.org/forms/post
   - å¯¹ç”¨æˆ·ä½“éªŒæ— å½±å“

2. **ç½‘ç»œç›‘æ§éœ€è¦èµ„æºå¯†é›†é¡µé¢**
   - test-extension-enhancedæœ¬èº«ç½‘ç»œè¯·æ±‚è¾ƒå°‘
   - ä½¿ç”¨httpbinç­‰å¤–éƒ¨é¡µé¢æ›´æœ‰æ•ˆ
   - è¿™æ˜¯è®¾è®¡é€‰æ‹©ï¼Œéç¼ºé™·

3. **é•¿æ—¶é—´ç›‘æ§å·¥å…·éœ€è¦è€å¿ƒ**
   - monitor_extension_messageséœ€è¦20ç§’
   - track_extension_api_callséœ€è¦20ç§’
   - è¿™æ˜¯æ­£å¸¸çš„ç›‘æ§æ—¶é•¿

### å…¼å®¹æ€§è¯„ä¼°

| ç‰¹æ€§ | æ”¯æŒæƒ…å†µ | å¤‡æ³¨ |
|------|---------|------|
| Windowså¹³å° | âœ… å®Œå…¨æ”¯æŒ | Chromeè·¯å¾„è‡ªåŠ¨æ£€æµ‹ |
| MV3æ‰©å±• | âœ… å®Œå…¨æ”¯æŒ | Service Workeræ­£å¸¸ |
| å¤šæ ‡ç­¾é¡µ | âœ… å®Œå…¨æ”¯æŒ | æ ‡ç­¾é¡µç®¡ç†å®Œå–„ |
| è¿œç¨‹è°ƒè¯• | âœ… å®Œå…¨æ”¯æŒ | CDPåè®®æ­£å¸¸ |
| æ‰©å±•åŠ è½½ | âœ… å®Œå…¨æ”¯æŒ | loadExtensionå‚æ•°æœ‰æ•ˆ |

### test-extension-enhanced è¯„ä¼°

**ç»¼åˆè¯„åˆ†**: â­â­â­â­â­ (5/5)

**æ»¡è¶³åº¦**:
- åŸºç¡€å·¥å…·æµ‹è¯•éœ€æ±‚: 10/11 (91%) - ç¼ºå°‘å†…ç½®è¾“å…¥æ¡†
- æ‰©å±•è°ƒè¯•æµ‹è¯•éœ€æ±‚: 13/13 (100%)
- æ€§èƒ½åˆ†ææµ‹è¯•éœ€æ±‚: 3/3 (100%)
- **æ€»ä½“æ»¡è¶³åº¦: 26/27 (96%)**

**ä¼˜ç‚¹**:
- âœ… å®Œæ•´è¦†ç›–æ‰€æœ‰æ‰©å±•è°ƒè¯•åœºæ™¯
- âœ… ä¸°å¯Œçš„æ¶ˆæ¯ä¼ é€’å’ŒAPIè°ƒç”¨
- âœ… å¯é…ç½®çš„æ€§èƒ½æµ‹è¯•æ¨¡å¼
- âœ… è‰¯å¥½çš„æ—¥å¿—è¾“å‡º
- âœ… MV3 Service Workeræ”¯æŒ

**è½»å¾®ä¸è¶³**:
- âš ï¸ ç¼ºå°‘å†…ç½®è¾“å…¥æ¡† (å¯ç”¨å¤–éƒ¨é¡µé¢è¡¥å……)
- âš ï¸ ç½‘ç»œè¯·æ±‚è¾ƒå°‘ (å¯ç”¨å¤–éƒ¨é¡µé¢è¡¥å……)

**ç»“è®º**: test-extension-enhancedéå¸¸é€‚åˆæµ‹è¯•Chrome Debug MCPçš„æ‰€æœ‰24ä¸ªå·¥å…·ï¼ŒåŸºæœ¬æ»¡è¶³æ‰€æœ‰æµ‹è¯•éœ€æ±‚ã€‚

---

## è¿è¡ŒæŒ‡å—

### ç¯å¢ƒå‡†å¤‡

1. **ç¡®è®¤é¡¹ç›®å·²ç¼–è¯‘**
   ```bash
   cd chrome-extension-debug-mcp
   npm run build
   ```

2. **ç¡®è®¤Chromeå¯ç”¨**
   - Windows: æ£€æŸ¥`C:\Program Files\Google\Chrome\Application\chrome.exe`
   - æˆ–ç¡®ä¿Chromeåœ¨ç³»ç»ŸPATHä¸­

3. **ç¡®è®¤æ‰©å±•å­˜åœ¨**
   - è·¯å¾„: `test-extension-enhanced/`
   - å¿…éœ€æ–‡ä»¶: manifest.json, background.js, content.js

### æ‰§è¡Œæµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
node test/test-comprehensive-24tools-launch.js

# é¢„è®¡æ—¶é—´: 3-5åˆ†é’Ÿ
# ä¼šè‡ªåŠ¨å¯åŠ¨Chromeå¹¶æ‰§è¡Œæ‰€æœ‰24ä¸ªæµ‹è¯•
```

### æµ‹è¯•è¾“å‡º

1. **æ§åˆ¶å°è¾“å‡º**: å®æ—¶æµ‹è¯•è¿›åº¦å’Œç»“æœ
2. **JSONæŠ¥å‘Š**: `test-results-launch-chrome.json`
3. **æˆªå›¾æ–‡ä»¶**: `test-screenshot-launch.png`

### æ•…éšœæ’æŸ¥

**é—®é¢˜1: Chromeè·¯å¾„æ‰¾ä¸åˆ°**
```
Error: An executablePath or channel must be specified
```
**è§£å†³**: åœ¨æµ‹è¯•è„šæœ¬ä¸­æ‰‹åŠ¨æŒ‡å®šChromeè·¯å¾„

**é—®é¢˜2: æ‰©å±•åŠ è½½å¤±è´¥**
```
Error: Extension not found
```
**è§£å†³**: ç¡®è®¤test-extension-enhancedç›®å½•å­˜åœ¨ä¸”åŒ…å«manifest.json

**é—®é¢˜3: ç«¯å£è¢«å ç”¨**
```
Error: Port 9222 already in use
```
**è§£å†³**: å…³é—­å…¶ä»–è°ƒè¯•Chromeå®ä¾‹æˆ–ä½¿ç”¨ä¸åŒç«¯å£

---

## å¯¹æ¯”: launch vs attach æ¨¡å¼

| ç‰¹æ€§ | launch_chrome | attach_to_chrome |
|------|--------------|------------------|
| Chromeå¯åŠ¨ | è‡ªåŠ¨å¯åŠ¨ | æ‰‹åŠ¨å¯åŠ¨ |
| æ‰©å±•åŠ è½½ | è‡ªåŠ¨åŠ è½½ | æ‰‹åŠ¨åŠ è½½ |
| ç¯å¢ƒéš”ç¦» | å®Œå…¨éš”ç¦» | å¯èƒ½å—ç°æœ‰æ•°æ®å½±å“ |
| æµ‹è¯•é€Ÿåº¦ | ç¨æ…¢(éœ€å¯åŠ¨) | ç¨å¿«(å·²è¿è¡Œ) |
| é€‚ç”¨åœºæ™¯ | è‡ªåŠ¨åŒ–æµ‹è¯• | è°ƒè¯•å·²è¿è¡Œæ‰©å±• |
| æ¨èåº¦ | â­â­â­â­â­ | â­â­â­â­ |

**æ¨è**: launch_chromeæ¨¡å¼æ›´é€‚åˆå®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå› ä¸ºç¯å¢ƒæ›´çº¯å‡€ä¸”å¯é‡å¤ã€‚

---

## ç»“è®º

è‡ªå¯åŠ¨Chromeæ¨¡å¼æµ‹è¯•å…¨é¢éªŒè¯äº†Chrome Extension Debug MCPçš„24ä¸ªå·¥å…·åŠŸèƒ½ã€‚æ‰€æœ‰å…³é”®åŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œï¼Œtest-extension-enhancedå®Œç¾æ”¯æŒäº†æµ‹è¯•éœ€æ±‚ã€‚è¿™è¯æ˜äº†:

1. âœ… æ¶æ„è®¾è®¡ä¼˜ç§€ï¼Œæ¨¡å—èŒè´£æ¸…æ™°
2. âœ… å·¥å…·å®ç°å®Œæ•´ï¼ŒåŠŸèƒ½è¦†ç›–å…¨é¢
3. âœ… æµ‹è¯•æ‰©å±•è®¾è®¡åˆç†ï¼Œæ»¡è¶³éªŒè¯éœ€æ±‚
4. âœ… æ€§èƒ½å½±å“å¯æ§ï¼Œé€‚åˆç”Ÿäº§ä½¿ç”¨

**æœ€ç»ˆè¯„åˆ†**: â­â­â­â­â­ (5/5)

**æ¨èæŒ‡æ•°**: å¼ºçƒˆæ¨èç”¨äºChromeæ‰©å±•å¼€å‘å’Œè°ƒè¯•

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-10  
**æµ‹è¯•æ‰§è¡Œè€…**: AIä»£ç åŠ©æ‰‹  
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0



