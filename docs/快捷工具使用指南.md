# Chrome Extension Debug MCP - å¿«æ·å·¥å…·ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

å¿«æ·ç»„åˆå·¥å…·é€šè¿‡ä¸€æ¬¡è°ƒç”¨è‡ªåŠ¨æ‰§è¡Œå¤šä¸ªè¯Šæ–­æ­¥éª¤ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚æœ¬æŒ‡å—ä»‹ç»ä¸‰ä¸ªå¿«æ·å·¥å…·çš„ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚

---

## ğŸš€ å·¥å…·åˆ—è¡¨

| å·¥å…·åç§° | åŠŸèƒ½ | æ‰§è¡Œæ­¥éª¤ | æ—¶é—´ | é€‚ç”¨åœºæ™¯ |
|---------|------|---------|------|---------|
| `quick_extension_debug` | å…¨é¢è¯Šæ–­æ‰©å±•çŠ¶æ€ | 4æ­¥ | 20-30ç§’ | å¿«é€Ÿæ’æŸ¥æ‰©å±•é—®é¢˜ |
| `quick_performance_check` | æ€§èƒ½å½±å“è¯„ä¼° | 2æ­¥ | 12-18ç§’ | è¯„ä¼°æ‰©å±•æ€§èƒ½å¼€é”€ |
| `export_extension_network_har` | å¯¼å‡ºç½‘ç»œæ•°æ® | 1æ­¥ | 10-30ç§’ | æ·±åº¦ç½‘ç»œåˆ†æ |

---

## 1. quick_extension_debug - å¿«é€Ÿæ‰©å±•è¯Šæ–­

### åŠŸèƒ½è¯´æ˜

**ä¸€é”®å®Œæˆ4é¡¹æ£€æŸ¥**ï¼š
1. âœ… æ‰©å±•åŸºæœ¬ä¿¡æ¯ï¼ˆIDã€ç‰ˆæœ¬ã€çŠ¶æ€ï¼‰
2. âœ… æ—¥å¿—åˆ†æï¼ˆæœ€è¿‘50æ¡ï¼Œé”™è¯¯ç»Ÿè®¡ï¼‰
3. âœ… å†…å®¹è„šæœ¬çŠ¶æ€ï¼ˆæ³¨å…¥æƒ…å†µï¼‰
4. âœ… å­˜å‚¨æ£€æŸ¥ï¼ˆlocalã€syncã€sessioné…é¢ï¼‰
5. âœ… ç”Ÿæˆäººç±»å¯è¯»æ‘˜è¦

### å‚æ•°è¯´æ˜

```typescript
{
  extensionId: string;           // å¿…éœ€ï¼šæ‰©å±•ID
  includeLogs?: boolean;         // å¯é€‰ï¼šæ˜¯å¦åŒ…å«æ—¥å¿—ï¼ˆé»˜è®¤trueï¼‰
  includeContentScript?: boolean; // å¯é€‰ï¼šæ˜¯å¦æ£€æŸ¥å†…å®¹è„šæœ¬ï¼ˆé»˜è®¤trueï¼‰
  includeStorage?: boolean;      // å¯é€‰ï¼šæ˜¯å¦æ£€æŸ¥å­˜å‚¨ï¼ˆé»˜è®¤trueï¼‰
  tabId?: string;                // å¯é€‰ï¼šæŒ‡å®šæ ‡ç­¾é¡µæ£€æŸ¥å†…å®¹è„šæœ¬
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€ç”¨æ³•
```javascript
const result = await callTool('quick_extension_debug', {
  extensionId: 'abc123...'
});
```

#### å®Œæ•´ç”¨æ³•
```javascript
const result = await callTool('quick_extension_debug', {
  extensionId: 'abc123...',
  includeLogs: true,
  includeContentScript: true,
  includeStorage: true,
  tabId: '456'  // å¯é€‰ï¼šæ£€æŸ¥ç‰¹å®šæ ‡ç­¾é¡µ
});
```

### è¿”å›æ•°æ®ç»“æ„

```json
{
  "extensionId": "abc123...",
  "timestamp": 1704917876000,
  
  "extension": {
    "id": "abc123...",
    "name": "My Extension",
    "version": "1.0.0",
    "enabled": true,
    "offlineEnabled": false
  },
  
  "logs": {
    "total": 150,
    "recent": [
      {
        "level": "error",
        "message": "Failed to fetch data",
        "timestamp": 1704917800000
      }
    ],
    "errorCount": 5,
    "warnCount": 12
  },
  
  "contentScript": {
    "injected": true,
    "status": "active",
    "tabsAnalyzed": 3
  },
  
  "storage": {
    "local": 10,    // 10ä¸ªé”®
    "sync": 5,      // 5ä¸ªé”®
    "session": 2,   // 2ä¸ªé”®
    "quota": {
      "used": 1024,
      "total": 10485760
    }
  },
  
  "summary": "å¿«é€Ÿè¯Šæ–­æŠ¥å‘Š for abc123...\n  - æ‰©å±•åç§°: My Extension\n  - ç‰ˆæœ¬: 1.0.0\n  - çŠ¶æ€: å¯ç”¨\n  - æ—¥å¿—: æ€»è®¡ 150 æ¡, é”™è¯¯ 5 æ¡, è­¦å‘Š 12 æ¡\n  - å†…å®¹è„šæœ¬: å·²æ³¨å…¥ (active)\n  - å­˜å‚¨: Local 10 é¡¹, Sync 5 é¡¹, Session 2 é¡¹\n    é…é¢ä½¿ç”¨: 1024 / 10485760 bytes"
}
```

### å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1: ç”¨æˆ·åé¦ˆæ‰©å±•ä¸å·¥ä½œ
```
ç”¨æˆ·: "æˆ‘çš„æ‰©å±•çªç„¶ä¸å·¥ä½œäº†"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_extension_debug
2. å‘ç° extension.enabled = false
3. å›å¤: "æ‰©å±•å½“å‰å·²ç¦ç”¨ï¼Œè¯·åœ¨æµè§ˆå™¨æ‰©å±•ç®¡ç†é¡µé¢å¯ç”¨å®ƒ"

æ—¶é—´: 20ç§’
```

#### åœºæ™¯2: æ’æŸ¥æ‰©å±•é”™è¯¯
```
ç”¨æˆ·: "æ‰©å±•æŠ¥é”™äº†"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_extension_debug
2. æŸ¥çœ‹ logs.recent å‘ç°é”™è¯¯: "Failed to fetch data"
3. æŸ¥çœ‹ logs.errorCount = 15 (é”™è¯¯é¢‘ç¹)
4. å›å¤: "æ‰©å±•å‡ºç°15æ¬¡ç½‘ç»œè¯·æ±‚é”™è¯¯ï¼Œè¯·æ£€æŸ¥APIç«¯ç‚¹å’Œç½‘ç»œè¿æ¥"

æ—¶é—´: 25ç§’
```

#### åœºæ™¯3: å†…å®¹è„šæœ¬æœªæ³¨å…¥
```
ç”¨æˆ·: "é¡µé¢ä¸Šçš„æŒ‰é’®æ²¡æœ‰ååº”"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_extension_debug (å¸¦tabId)
2. å‘ç° contentScript.injected = false
3. å›å¤: "å†…å®¹è„šæœ¬æœªæ³¨å…¥åˆ°è¯¥é¡µé¢ï¼Œè¯·æ£€æŸ¥manifest.jsonä¸­çš„content_scriptsé…ç½®"

æ—¶é—´: 22ç§’
```

### ä¼˜åŠ¿å¯¹æ¯”

**ä¼ ç»Ÿæ–¹å¼**:
```javascript
// éœ€è¦æ‰‹åŠ¨è°ƒç”¨4ä¸ªå·¥å…·
const ext = await callTool('list_extensions', {});
const logs = await callTool('get_extension_logs', { extensionId });
const cs = await callTool('content_script_status', { extensionId });
const storage = await callTool('inspect_extension_storage', { extensionId });

// æ‰‹åŠ¨æ•´åˆåˆ†æç»“æœ...
```
**è€—æ—¶**: 4-6åˆ†é’Ÿï¼ˆæ‰‹åŠ¨æ“ä½œ + åˆ†æï¼‰

**å¿«æ·æ–¹å¼**:
```javascript
// ä¸€æ¬¡è°ƒç”¨ï¼Œè‡ªåŠ¨æ•´åˆ
const result = await callTool('quick_extension_debug', { extensionId });
// ç›´æ¥ä½¿ç”¨ result.summary
```
**è€—æ—¶**: 20-30ç§’ï¼ˆè‡ªåŠ¨åŒ–ï¼‰

**æ•ˆç‡æå‡**: 12-18å€ï¼ ğŸš€

---

## 2. quick_performance_check - å¿«é€Ÿæ€§èƒ½æ£€æµ‹

### åŠŸèƒ½è¯´æ˜

**ä¸€é”®å®Œæˆæ€§èƒ½+ç½‘ç»œåˆ†æ**ï¼š
1. âœ… æ‰©å±•æ€§èƒ½å½±å“åˆ†æï¼ˆCPUã€å†…å­˜ï¼‰
2. âœ… Core Web Vitalsæµ‹é‡ï¼ˆLCPã€FIDã€CLSï¼‰
3. âœ… ç½‘ç»œæ´»åŠ¨ç›‘æ§ï¼ˆ2ç§’å¿«é€Ÿç›‘æ§ï¼‰
4. âœ… ç»¼åˆå½±å“è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰
5. âœ… ç”Ÿæˆæ€§èƒ½æ‘˜è¦æŠ¥å‘Š

### å‚æ•°è¯´æ˜

```typescript
{
  extensionId: string;    // å¿…éœ€ï¼šæ‰©å±•ID
  testUrl?: string;       // å¯é€‰ï¼šæµ‹è¯•URLï¼ˆé»˜è®¤https://example.comï¼‰
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€ç”¨æ³•
```javascript
const result = await callTool('quick_performance_check', {
  extensionId: 'abc123...'
});
```

#### æŒ‡å®šæµ‹è¯•URL
```javascript
const result = await callTool('quick_performance_check', {
  extensionId: 'abc123...',
  testUrl: 'https://www.google.com'
});
```

### è¿”å›æ•°æ®ç»“æ„

```json
{
  "extensionId": "abc123...",
  "testUrl": "https://example.com",
  "timestamp": 1704917876000,
  
  "performance": {
    "cpuUsage": 1.4,        // CPUå½±å“ (%)
    "memoryUsage": 0.4,     // å†…å­˜å½±å“ (MB)
    "executionTime": 50,    // æ‰§è¡Œæ—¶é—´ (ms)
    "impactScore": 97,      // å½±å“è¯„åˆ† (0-100)
    "cwv": {
      "lcp": 78.02,         // Largest Contentful Paint (ms)
      "fid": 0,             // First Input Delay (ms)
      "cls": 0.000,         // Cumulative Layout Shift
      "rating": {
        "lcp": "good",
        "fid": "good",
        "cls": "good"
      },
      "score": 100
    },
    "recommendations": [
      "æ‰©å±•æ€§èƒ½å½±å“æå°ï¼Œæ— éœ€ä¼˜åŒ–"
    ]
  },
  
  "network": {
    "totalRequests": 5,
    "totalDataTransferred": 2048,  // bytes
    "failedRequests": 0,
    "slowestRequests": [
      {
        "url": "https://api.example.com/data",
        "duration": 120
      }
    ],
    "summary": {
      "averageResponseTime": "85ms",
      "resourceTypes": { "xhr": 3, "fetch": 2 }
    }
  },
  
  "summary": "å¿«é€Ÿæ€§èƒ½æ£€æµ‹æŠ¥å‘Š for abc123... (URL: https://example.com):\n  - CPUå½±å“: 1.4% â†‘\n  - å†…å­˜å½±å“: 0.4MB â†‘\n  - ç»¼åˆå½±å“è¯„åˆ†: 97/100\n  - Core Web Vitals: LCP 78ms, FID 0ms, CLS 0.000\n  - ç½‘ç»œè¯·æ±‚: æ€»è®¡ 5 ä¸ª, å¤±è´¥ 0 ä¸ª\n  - æ€»ä¼ è¾“æ•°æ®: 2.0 KB\n  - æœ€æ…¢è¯·æ±‚: https://api.example.com/data (120ms)"
}
```

### å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1: è¯„ä¼°æ‰©å±•æ€§èƒ½å½±å“
```
ç”¨æˆ·: "è¿™ä¸ªæ‰©å±•ä¼šæ‹–æ…¢æµè§ˆå™¨å—ï¼Ÿ"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_performance_check
2. åˆ†æç»“æœ: impactScore = 97/100
3. å›å¤: "æ‰©å±•æ€§èƒ½å½±å“æå°ï¼ˆè¯„åˆ†97/100ï¼‰ï¼š
   - CPUå¢åŠ 1.4%
   - å†…å­˜å¢åŠ 0.4MB
   - æ‰€æœ‰Core Web VitalsæŒ‡æ ‡ä¸º'good'çº§åˆ«
   å®Œå…¨ä¸ä¼šå½±å“æµè§ˆä½“éªŒï¼"

æ—¶é—´: 16ç§’
```

#### åœºæ™¯2: æ€§èƒ½ä¼˜åŒ–å»ºè®®
```
ç”¨æˆ·: "æ‰©å±•åŠ è½½é¡µé¢å¾ˆæ…¢"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_performance_check
2. å‘ç°: cpuUsage = 25%, impactScore = 40/100
3. æŸ¥çœ‹ cwv.lcp = 5500ms (poor)
4. å›å¤: "æ‰©å±•æ€§èƒ½é—®é¢˜ä¸¥é‡ï¼ˆè¯„åˆ†40/100ï¼‰ï¼š
   - CPUå ç”¨25%è¿‡é«˜
   - LCPæŒ‡æ ‡5.5ç§’ï¼ˆpoorçº§åˆ«ï¼‰
   å»ºè®®: 
   1. ä¼˜åŒ–èµ„æºåŠ è½½é€»è¾‘
   2. å‡å°‘DOMæ“ä½œ
   3. ä½¿ç”¨Web Workerså¤„ç†å¯†é›†è®¡ç®—"

æ—¶é—´: 18ç§’
```

#### åœºæ™¯3: ç½‘ç»œè¯·æ±‚åˆ†æ
```
ç”¨æˆ·: "æ‰©å±•ç½‘ç»œè¯·æ±‚é¢‘ç¹"

AIåŠ©æ‰‹:
1. è°ƒç”¨ quick_performance_check
2. å‘ç°: totalRequests = 150 (2ç§’å†…)
3. æŸ¥çœ‹ failedRequests = 20
4. å›å¤: "ç½‘ç»œæ´»åŠ¨å¼‚å¸¸ï¼š
   - 2ç§’å†…å‘èµ·150ä¸ªè¯·æ±‚
   - 20ä¸ªè¯·æ±‚å¤±è´¥
   - æ€»æ•°æ®ä¼ è¾“: 500KB
   å»ºè®®: 
   1. å®ç°è¯·æ±‚å»æŠ–/èŠ‚æµ
   2. æ‰¹é‡å¤„ç†APIè°ƒç”¨
   3. æ·»åŠ è¯·æ±‚ç¼“å­˜"

æ—¶é—´: 14ç§’
```

### æ€§èƒ½è¯„åˆ†æ ‡å‡†

| è¯„åˆ† | ç­‰çº§ | è¯´æ˜ | å»ºè®® |
|------|------|------|------|
| 90-100 | ä¼˜ç§€ â­â­â­â­â­ | æ€§èƒ½å½±å“æå° | æ— éœ€ä¼˜åŒ– |
| 75-89 | è‰¯å¥½ â­â­â­â­â˜† | è½»å¾®å½±å“ | å¯ä»¥ä¼˜åŒ– |
| 60-74 | ä¸€èˆ¬ â­â­â­â˜†â˜† | ä¸­ç­‰å½±å“ | å»ºè®®ä¼˜åŒ– |
| 40-59 | è¾ƒå·® â­â­â˜†â˜†â˜† | æ˜æ˜¾å½±å“ | å¿…é¡»ä¼˜åŒ– |
| 0-39 | å¾ˆå·® â­â˜†â˜†â˜†â˜† | ä¸¥é‡å½±å“ | ç´§æ€¥ä¼˜åŒ– |

### ä¼˜åŠ¿å¯¹æ¯”

**ä¼ ç»Ÿæ–¹å¼**:
```javascript
const perf = await callTool('analyze_extension_performance', { 
  extensionId,
  duration: 3000 
});
const network = await callTool('track_extension_network', { 
  extensionId,
  duration: 30000 
});
// æ‰‹åŠ¨åˆ†æå’Œè®¡ç®—è¯„åˆ†...
```
**è€—æ—¶**: 35ç§’+ æ‰‹åŠ¨åˆ†ææ—¶é—´

**å¿«æ·æ–¹å¼**:
```javascript
const result = await callTool('quick_performance_check', { 
  extensionId 
});
// è‡ªåŠ¨åˆ†æï¼Œ16ç§’å®Œæˆ
```
**æ•ˆç‡æå‡**: 2å€+ ğŸš€

---

## 3. export_extension_network_har - HARæ ¼å¼å¯¼å‡º

### åŠŸèƒ½è¯´æ˜

**å¯¼å‡ºæ ‡å‡†HAR 1.2æ ¼å¼ç½‘ç»œæ•°æ®**ï¼š
1. âœ… æ”¶é›†æ‰©å±•ç½‘ç»œæ´»åŠ¨ï¼ˆå¯è‡ªå®šä¹‰æ—¶é•¿ï¼‰
2. âœ… è½¬æ¢ä¸ºHAR 1.2æ ‡å‡†æ ¼å¼
3. âœ… ç”Ÿæˆè¯¦ç»†æ‘˜è¦ä¿¡æ¯
4. âœ… æ”¯æŒä¿å­˜æ–‡ä»¶æˆ–è¿”å›æ•°æ®
5. âœ… å…¼å®¹Chrome DevToolsã€WebPageTest

### å‚æ•°è¯´æ˜

```typescript
{
  extensionId: string;      // å¿…éœ€ï¼šæ‰©å±•ID
  duration?: number;        // å¯é€‰ï¼šç›‘æ§æ—¶é•¿ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤30000ï¼‰
  outputPath?: string;      // å¯é€‰ï¼šä¿å­˜è·¯å¾„
  testUrl?: string;         // å¯é€‰ï¼šæµ‹è¯•URL
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### ä»…è¿”å›æ•°æ®
```javascript
const result = await callTool('export_extension_network_har', {
  extensionId: 'abc123...',
  duration: 10000  // ç›‘æ§10ç§’
});
```

#### ä¿å­˜åˆ°æ–‡ä»¶
```javascript
const result = await callTool('export_extension_network_har', {
  extensionId: 'abc123...',
  duration: 30000,
  outputPath: './network-activity.har'
});
```

#### æŒ‡å®šæµ‹è¯•URL
```javascript
const result = await callTool('export_extension_network_har', {
  extensionId: 'abc123...',
  testUrl: 'https://www.bing.com',
  duration: 20000
});
```

### è¿”å›æ•°æ®ç»“æ„

```json
{
  "harData": {
    "log": {
      "version": "1.2",
      "creator": {
        "name": "Chrome Extension Debug MCP",
        "version": "4.0.0"
      },
      "pages": [
        {
          "startedDateTime": "2024-01-10T12:00:00.000Z",
          "id": "page_1",
          "title": "Extension Network Activity - https://example.com",
          "pageTimings": {
            "onContentLoad": -1,
            "onLoad": -1
          }
        }
      ],
      "entries": [
        {
          "startedDateTime": "2024-01-10T12:00:01.000Z",
          "time": 120,
          "request": {
            "method": "GET",
            "url": "https://api.example.com/data",
            "httpVersion": "HTTP/1.1",
            "headers": [...],
            "queryString": [...],
            "headersSize": 256,
            "bodySize": 0
          },
          "response": {
            "status": 200,
            "statusText": "OK",
            "httpVersion": "HTTP/1.1",
            "headers": [...],
            "content": {
              "size": 1024,
              "mimeType": "application/json"
            },
            "headersSize": 180,
            "bodySize": 1024
          },
          "cache": {},
          "timings": {
            "dns": 5,
            "connect": 10,
            "ssl": 15,
            "send": 1,
            "wait": 80,
            "receive": 9
          },
          "_resourceType": "xhr"
        }
      ]
    }
  },
  "savedPath": "./network-activity.har",  // å¦‚æœæŒ‡å®šäº†outputPath
  "summary": {
    "totalRequests": 25,
    "totalSize": "45.6 KB",
    "averageResponseTime": "125 ms",
    "resourceTypes": {
      "xhr": 10,
      "fetch": 8,
      "script": 5,
      "image": 2
    },
    "statusCodes": {
      "200": 23,
      "404": 2
    }
  }
}
```

### å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1: æ·±åº¦ç½‘ç»œåˆ†æ
```
ç”¨æˆ·: "åˆ†ææ‰©å±•çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚"

AIåŠ©æ‰‹:
1. è°ƒç”¨ export_extension_network_har (30ç§’ç›‘æ§)
2. å¯¼å‡ºHARæ–‡ä»¶
3. å›å¤: "HARæ–‡ä»¶å·²ç”Ÿæˆï¼Œå…±æ•è·25ä¸ªè¯·æ±‚ï¼š
   - æ€»æ•°æ®ä¼ è¾“: 45.6KB
   - å¹³å‡å“åº”æ—¶é—´: 125ms
   - XHRè¯·æ±‚: 10ä¸ª
   - Fetchè¯·æ±‚: 8ä¸ª
   
   å¯åœ¨Chrome DevToolsä¸­æ‰“å¼€è¯¥æ–‡ä»¶æŸ¥çœ‹è¯¦ç»†ç€‘å¸ƒå›¾"

æ—¶é—´: 30ç§’
```

#### åœºæ™¯2: æ€§èƒ½ä¼˜åŒ–åˆ†æ
```
ç”¨æˆ·: "å“ªäº›è¯·æ±‚æœ€æ…¢ï¼Ÿ"

AIåŠ©æ‰‹:
1. è°ƒç”¨ export_extension_network_har
2. åˆ†æ harData.log.entries æŒ‰ time æ’åº
3. å›å¤: "æœ€æ…¢çš„3ä¸ªè¯·æ±‚ï¼š
   1. https://api.slow.com/data - 2500ms
   2. https://cdn.example.com/large.js - 1800ms
   3. https://analytics.com/track - 950ms
   
   å»ºè®®ä¼˜åŒ–è¿™äº›æ…¢è¯·æ±‚æˆ–å®ç°å¼‚æ­¥åŠ è½½"

æ—¶é—´: 25ç§’
```

#### åœºæ™¯3: é”™è¯¯è¯·æ±‚æ’æŸ¥
```
ç”¨æˆ·: "ä¸ºä»€ä¹ˆæœ‰äº›è¯·æ±‚å¤±è´¥ï¼Ÿ"

AIåŠ©æ‰‹:
1. è°ƒç”¨ export_extension_network_har
2. æŸ¥æ‰¾ status != 200 çš„è¯·æ±‚
3. å›å¤: "å‘ç°5ä¸ªå¤±è´¥è¯·æ±‚ï¼š
   - https://api.example.com/old-endpoint (404)
   - https://cdn.broken.com/script.js (404)
   - https://api.timeout.com/slow (504)
   
   å»ºè®®: 
   1. æ›´æ–°APIç«¯ç‚¹URL
   2. æ£€æŸ¥CDNèµ„æºå¯ç”¨æ€§
   3. å¢åŠ è¯·æ±‚è¶…æ—¶å¤„ç†"

æ—¶é—´: 20ç§’
```

### HARæ–‡ä»¶ä½¿ç”¨æ–¹æ³•

#### åœ¨Chrome DevToolsä¸­å¯¼å…¥
1. æ‰“å¼€Chrome DevTools (F12)
2. åˆ‡æ¢åˆ° **Network** é¢æ¿
3. å³é”®ç‚¹å‡»è¯·æ±‚åˆ—è¡¨ â†’ **Import HAR file...**
4. é€‰æ‹©å¯¼å‡ºçš„ `.har` æ–‡ä»¶
5. æŸ¥çœ‹ç€‘å¸ƒå›¾å’Œè¯¦ç»†ä¿¡æ¯

#### åœ¨WebPageTestä¸­åˆ†æ
1. è®¿é—® https://www.webpagetest.org/
2. ç‚¹å‡» **Upload HAR**
3. ä¸Šä¼  `.har` æ–‡ä»¶
4. æŸ¥çœ‹è¯¦ç»†æ€§èƒ½æŠ¥å‘Š

#### ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·
- **HAR Viewer**: http://www.softwareishard.com/har/viewer/
- **Google HAR Analyzer**: Chromeæ‰©å±•
- **Charles Proxy**: å¯¼å…¥HARæŸ¥çœ‹è¯·æ±‚

### HARæ ¼å¼ä¼˜åŠ¿

| ç‰¹æ€§ | è¯´æ˜ | ä»·å€¼ |
|------|------|------|
| **æ ‡å‡†åŒ–** | HTTP Archive 1.2å›½é™…æ ‡å‡† | è·¨å·¥å…·å…¼å®¹ |
| **è¯¦ç»†** | åŒ…å«å®Œæ•´request/response/timing | æ·±åº¦åˆ†æ |
| **å¯è§†åŒ–** | DevToolsç€‘å¸ƒå›¾å±•ç¤º | ç›´è§‚æ˜“æ‡‚ |
| **åˆ†äº«** | JSONæ ¼å¼æ˜“äºåˆ†äº« | å›¢é˜Ÿåä½œ |
| **å†å²è®°å½•** | ä¿å­˜å¿«ç…§å¯¹æ¯” | æ€§èƒ½è¿½è¸ª |

---

## æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚çš„å·¥å…·

| éœ€æ±‚ | æ¨èå·¥å…· | åŸå›  |
|------|---------|------|
| **å¿«é€Ÿæ’æŸ¥é—®é¢˜** | `quick_extension_debug` | å…¨é¢è¯Šæ–­ï¼Œ20ç§’å®Œæˆ |
| **è¯„ä¼°æ€§èƒ½å½±å“** | `quick_performance_check` | è‡ªåŠ¨è®¡ç®—è¯„åˆ†ï¼Œ16ç§’å®Œæˆ |
| **æ·±åº¦ç½‘ç»œåˆ†æ** | `export_extension_network_har` | æ ‡å‡†æ ¼å¼ï¼Œå·¥å…·å…¼å®¹ |
| **å¯¹æ¯”æ€§èƒ½** | å¤šæ¬¡è°ƒç”¨`quick_performance_check` | ç›¸åŒURLæµ‹è¯•å¯¹æ¯” |

### 2. ç»„åˆä½¿ç”¨

#### å®Œæ•´è¯Šæ–­æµç¨‹
```javascript
// æ­¥éª¤1: å¿«é€Ÿè¯Šæ–­ï¼ˆ20ç§’ï¼‰
const debug = await callTool('quick_extension_debug', { extensionId });
if (debug.extension.enabled && debug.logs.errorCount > 0) {
  // å‘ç°é”™è¯¯ï¼Œè¿›ä¸€æ­¥åˆ†æ
  
  // æ­¥éª¤2: æ€§èƒ½æ£€æµ‹ï¼ˆ16ç§’ï¼‰
  const perf = await callTool('quick_performance_check', { extensionId });
  if (perf.performance.impactScore < 70) {
    // æ€§èƒ½æœ‰é—®é¢˜ï¼Œå¯¼å‡ºè¯¦ç»†æ•°æ®
    
    // æ­¥éª¤3: HARå¯¼å‡ºï¼ˆ30ç§’ï¼‰
    const har = await callTool('export_extension_network_har', { 
      extensionId,
      duration: 30000
    });
  }
}

// æ€»è€—æ—¶: æœ€å¤š66ç§’ï¼Œåˆ†é˜¶æ®µæ‰§è¡Œ
```

### 3. å‚æ•°ä¼˜åŒ–å»ºè®®

#### duration (ç›‘æ§æ—¶é•¿)
- **å¿«é€Ÿæ£€æµ‹**: 2000-5000msï¼ˆè¶³å¤Ÿæ•è·åˆå§‹è¯·æ±‚ï¼‰
- **å¸¸è§„ç›‘æ§**: 10000-30000msï¼ˆå¹³è¡¡é€Ÿåº¦å’Œè¦†ç›–ï¼‰
- **æ·±åº¦åˆ†æ**: 60000ms+ï¼ˆæ•è·å‘¨æœŸæ€§ä»»åŠ¡ï¼‰

#### testUrl (æµ‹è¯•URL)
- **ç®€å•é¡µé¢**: `https://example.com`ï¼ˆåŠ è½½å¿«ï¼‰
- **å®é™…åœºæ™¯**: ç›®æ ‡åº”ç”¨URLï¼ˆçœŸå®æµ‹è¯•ï¼‰
- **é‡é‡çº§é¡µé¢**: `https://www.cnn.com`ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰

### 4. é”™è¯¯å¤„ç†

```javascript
try {
  const result = await callTool('quick_extension_debug', { extensionId });
  
  // æ£€æŸ¥å…³é”®å­—æ®µ
  if (!result.extension) {
    console.error('æ‰©å±•æœªæ‰¾åˆ°');
    return;
  }
  
  if (!result.summary) {
    console.warn('æ‘˜è¦ç”Ÿæˆå¤±è´¥ï¼Œä½†æ•°æ®å¯ç”¨');
  }
  
  // å¤„ç†å­˜å‚¨è¶…æ—¶ï¼ˆä¼˜é›…é™çº§ï¼‰
  if (result.storage.local === 0 && result.storage.sync === 0) {
    console.info('å­˜å‚¨è¯»å–å¯èƒ½è¶…æ—¶ï¼Œæ˜¾ç¤ºä¸º0é¡¹');
  }
  
} catch (error) {
  console.error('å·¥å…·è°ƒç”¨å¤±è´¥:', error.message);
  // å›é€€åˆ°å•ç‹¬å·¥å…·è°ƒç”¨
}
```

### 5. æ€§èƒ½ä¼˜åŒ–

#### é¿å…é¢‘ç¹è°ƒç”¨
```javascript
// âŒ ä¸æ¨è: é¢‘ç¹è°ƒç”¨å½±å“æ€§èƒ½
setInterval(() => {
  callTool('quick_performance_check', { extensionId });
}, 5000);

// âœ… æ¨è: æŒ‰éœ€è°ƒç”¨
// ä»…åœ¨ç”¨æˆ·è¯·æ±‚æˆ–å‘ç°é—®é¢˜æ—¶è°ƒç”¨
```

#### ä½¿ç”¨ç¼“å­˜
```javascript
const cache = new Map();
const CACHE_TTL = 60000; // 1åˆ†é’Ÿ

async function cachedQuickDebug(extensionId) {
  const cacheKey = `debug_${extensionId}`;
  const cached = cache.get(cacheKey);
  
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }
  
  const result = await callTool('quick_extension_debug', { extensionId });
  cache.set(cacheKey, { data: result, timestamp: Date.now() });
  return result;
}
```

---

## å¸¸è§é—®é¢˜

### Q1: å­˜å‚¨è¯»å–æ˜¾ç¤º0é¡¹ï¼Œä½†å®é™…æœ‰æ•°æ®ï¼Ÿ
**A**: è¿™æ˜¯Service Workerä¼‘çœ å¯¼è‡´çš„è¶…æ—¶ã€‚ä¿®å¤å·²å®ç°ï¼ˆå¢åŠ è¶…æ—¶åˆ°10ç§’ã€è‡ªåŠ¨é‡è¯•2æ¬¡ã€Service Workerå”¤é†’ï¼‰ã€‚å¦‚æœä»è¶…æ—¶ï¼Œä¼šä¼˜é›…é™çº§æ˜¾ç¤º0é¡¹ã€‚

### Q2: network.totalRequestsä¸º0ï¼Œä½†æ‰©å±•æœ‰ç½‘ç»œæ´»åŠ¨ï¼Ÿ
**A**: å¯èƒ½åŸå› ï¼š
1. ç›‘æ§æ—¶é•¿å¤ªçŸ­ï¼ˆå¢åŠ `duration`ï¼‰
2. ç½‘ç»œè¯·æ±‚åœ¨ç›‘æ§çª—å£å¤–ï¼ˆå¢åŠ ç­‰å¾…æ—¶é—´ï¼‰
3. æ‰©å±•ä½¿ç”¨backgroundå‘èµ·è¯·æ±‚ï¼ˆç¡®è®¤æ‰©å±•æ¶æ„ï¼‰

### Q3: HARæ–‡ä»¶å¾ˆå¤§æ€ä¹ˆåŠï¼Ÿ
**A**: 
1. å‡å°‘ç›‘æ§æ—¶é•¿
2. HARæ–‡ä»¶å¯ç”¨gzipå‹ç¼©ï¼ˆå‹ç¼©ç‡é€šå¸¸80%+ï¼‰
3. åªä¿ç•™å…³é”®entriesï¼ˆæ‰‹åŠ¨ç¼–è¾‘JSONï¼‰

### Q4: quick_performance_checkç»“æœä¸ç¨³å®šï¼Ÿ
**A**: æ€§èƒ½æµ‹é‡å—å¤šç§å› ç´ å½±å“ï¼š
1. ç³»ç»Ÿè´Ÿè½½
2. ç½‘ç»œçŠ¶å†µ
3. ç¼“å­˜çŠ¶æ€

å»ºè®®ï¼š
- å¤šæ¬¡æµ‹è¯•å–å¹³å‡å€¼
- ä½¿ç”¨ç›¸åŒtestUrlå¯¹æ¯”
- å…³é—­å…¶ä»–æ‰©å±•

### Q5: å·¥å…·æ‰§è¡Œå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
**A**: 
1. `quick_extension_debug`: å­˜å‚¨æ£€æŸ¥æœ€æ…¢ï¼Œå¯è®¾ç½®`includeStorage: false`
2. `quick_performance_check`: å·²ä½¿ç”¨2ç§’å¿«é€Ÿæ¨¡å¼
3. `export_extension_network_har`: å‡å°‘`duration`

---

## æ•ˆç‡å¯¹æ¯”æ€»ç»“

| ä»»åŠ¡ | ä¼ ç»Ÿæ–¹å¼ | å¿«æ·å·¥å…· | æå‡ |
|------|---------|---------|------|
| **æ‰©å±•è¯Šæ–­** | 4-6åˆ†é’Ÿï¼ˆ4ä¸ªå·¥å…·+æ‰‹åŠ¨åˆ†æï¼‰ | 20ç§’ï¼ˆè‡ªåŠ¨åŒ–ï¼‰ | **12-18å€** ğŸš€ |
| **æ€§èƒ½è¯„ä¼°** | 35ç§’+æ‰‹åŠ¨åˆ†æ | 16ç§’ï¼ˆè‡ªåŠ¨åŒ–ï¼‰ | **2å€+** ğŸš€ |
| **ç½‘ç»œåˆ†æ** | 30ç§’+æ‰‹åŠ¨å¯¼å‡º | 10-30ç§’ï¼ˆä¸€é”®å®Œæˆï¼‰ | **1.5å€** ğŸš€ |

---

## ç›¸å…³æ–‡æ¡£

- [Core Web Vitalsè§£è¯»](./Core-Web-Vitalsè§£è¯».md) - æ·±å…¥ç†è§£LCPã€FIDã€CLSæŒ‡æ ‡
- [HARåˆ†ææ•™ç¨‹](./HARåˆ†ææ•™ç¨‹.md) - è¯¦ç»†HARæ–‡ä»¶åˆ†ææ–¹æ³•
- [README.md](../README.md) - å®Œæ•´å·¥å…·åˆ—è¡¨å’Œå®‰è£…æŒ‡å—

---

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-01-10  
**é€‚ç”¨ç‰ˆæœ¬**: Chrome Extension Debug MCP 4.0.0+


